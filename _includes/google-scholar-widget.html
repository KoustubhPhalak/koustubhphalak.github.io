<div class="scholar-widget">
    <h3>ðŸ“š Google Scholar Profile</h3>
    <div class="scholar-stats">
      <div class="stat">
        <span class="number" id="citations">Loading...</span>
        <span class="label">Citations</span>
      </div>
      <div class="stat">
        <span class="number" id="h-index">Loading...</span>
        <span class="label">h-index</span>
      </div>
      <div class="stat">
        <span class="number" id="i10-index">Loading...</span>
        <span class="label">i10-index</span>
      </div>
    </div>
    <a href="https://scholar.google.com/citations?user={{ include.scholar_id }}" target="_blank">
      View Full Profile â†’
    </a>
  </div>
  
  <script>
  window.addEventListener('load', function() {
    console.log('Page loaded, fetching Scholar data...');
    
    var scholarId = '{{ include.scholar_id }}';
    console.log('Scholar ID: ' + scholarId);
    
    var url = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://scholar.google.com/citations?user=' + scholarId + '&hl=en');
    
    fetch(url)
      .then(function(response) {
        return response.json();
      })
      .then(function(data) {
        console.log('Data received');
        
        var parser = new DOMParser();
        var doc = parser.parseFromString(data.contents, 'text/html');
        
        var stats = doc.querySelectorAll('.gsc_rsb_std');
        console.log('Found ' + stats.length + ' stat elements');
        
        if (stats.length >= 3) {
          document.getElementById('citations').textContent = stats[0].textContent;
          document.getElementById('h-index').textContent = stats[2].textContent;
          if (stats[4]) {
            document.getElementById('i10-index').textContent = stats[4].textContent;
          }
        } else {
          console.log('Not enough stats found');
          document.getElementById('citations').textContent = 'N/A';
          document.getElementById('h-index').textContent = 'N/A';
          document.getElementById('i10-index').textContent = 'N/A';
        }
      })
      .catch(function(error) {
        console.error('Error:', error);
        document.getElementById('citations').textContent = 'Error';
        document.getElementById('h-index').textContent = 'Error';
        document.getElementById('i10-index').textContent = 'Error';
      });
  });
  </script>
  
  <style>
  .scholar-widget {
    background: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
  }
  
  .scholar-widget h3 {
    margin-top: 0;
    text-align: center;
    color: #333;
  }
  
  .scholar-stats {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
  }
  
  .stat {
    text-align: center;
  }
  
  .number {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: #4285f4;
  }
  
  .label {
    font-size: 14px;
    color: #666;
  }
  
  .scholar-widget a {
    display: block;
    text-align: center;
    margin-top: 15px;
    padding: 10px;
    background: #4285f4;
    color: white;
    text-decoration: none;
    border-radius: 5px;
  }
  
  .scholar-widget a:hover {
    background: #3367d6;
  }
  </style>